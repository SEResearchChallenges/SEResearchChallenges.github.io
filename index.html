<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>软件工程重要研究问题</title>

    <style>
      :root {
        --bg: #ffffff;
        --panel: #f7f9fc;
        --card: #ffffff;
        --border: #e3e8ef;
        --radius: 8px;
        --maxwidth: 1100px;
        --font-sans: "Helvetica Neue", Arial, "Noto Sans SC", sans-serif;
        --font-serif: "Noto Serif SC", serif;
        --title-color: #004a9f;
        --text-color: #0e3b78;
        --muted: #666666;
        --title-size: 30px;
        --text-size: 28px;
        --sidebar-font-size: 30px;
        --footer-h: 50px;
        --sidebar-width: 300px;
        --maxwidth: 1350px;
        /* 列宽（序号列宽度） */
        --pt-counter-size: 36px;
        --pt-gap: 12px;
        /* 整体左缩进（会把序号列向右推） */
        --pt-list-indent: 30px;
      }

      html,
      body {
        margin: 0;
        background: var(--bg);
        color: var(--text-color);
        font-family: var(--font-sans);
        padding-bottom: var(--footer-h);
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      header.top-header {
        width: 100%;
        text-align: center;
        padding: 28px 16px 18px;
        background: var(--bg);
      }
      .header {
        font-family: var(--font-serif);
        font-size: calc(var(--title-size) * 1.2);
        font-weight: 800;
        color: var(--title-color);
        margin: 0;
      }

      .page {
        display: flex;
        justify-content: center;
        padding: 20px 20px 40px;
      }
      .shell {
        max-width: var(--maxwidth);
        width: 100%;
        display: grid;
        gap: 24px;
        box-sizing: border-box;
        grid-template-columns: var(--sidebar-width) 1fr;
      }

      .sidebar {
        background: var(--panel);
        border: 1px solid var(--border);
        padding: 18px;
        border-radius: var(--radius);
      }
      .nav-title {
        font-weight: 700;
        margin-bottom: 10px;
        font-size: var(--sidebar-font-size);
        color: var(--title-color);
      }
      .nav-list {
        list-style: none;
        padding: 0;
        margin: 0;
      }
      .nav-btn {
        width: 100%;
        padding: 10px 12px;
        font-size: var(--sidebar-font-size);
        background: transparent;
        border: 1px solid transparent;
        border-radius: 6px;
        text-align: left;
        cursor: pointer;
        transition: 0.15s;
        color: var(--text-color);
      }
      .nav-btn:hover {
        background: #e9f0fb;
      }
      .nav-btn.active {
        background: #d6e9ff;
        border-color: #1e90ff;
      }

      .sub-list {
        list-style: none;
        padding-left: 8px;
        margin-top: 8px;
        display: none;
      }
      .sub-list.show {
        display: block;
      }

      .nav-sub {
        display: block;
        padding: 8px 10px;
        font-size: 25px;
        color: var(--text-color);
        text-decoration: underline;
        text-underline-offset: 4px;
        border-radius: 6px;
        cursor: pointer;
        background: transparent;
        border: none;
        text-align: left;
      }
      .nav-sub:hover {
        background: #eef6ff;
        color: var(--title-color);
      }

      .card {
        background: var(--card);
        padding: 16px;
        border-radius: var(--radius);
        border: 1px solid var(--border);
        box-sizing: border-box;
      }
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0 0 0 0);
        white-space: nowrap;
        border: 0;
      }
      img.auto-img {
        max-width: 100%;
        border-radius: 6px;
        margin-bottom: 12px;
        display: block;
      }

      footer.footer {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        height: var(--footer-h);
        background: var(--panel);
        border-top: 1px solid var(--border);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 13px;
        color: #555;
      }

      @media (max-width: 900px) {
        :root {
          --sidebar-width: 100%;
        }
        .shell {
          grid-template-columns: 1fr;
        }
      }

      /* proposal template */
      .proposal-template {
        display: flex;
        gap: 28px;
        align-items: flex-start;
        padding: 18px;
        box-sizing: border-box;
      }
      .pt-left {
        flex: 1 1 60%;
        min-width: 280px;
      }
      .pt-title {
        font-family: var(--font-serif);
        font-size: var(--title-size);
        color: var(--title-color);
        font-weight: 800;
        margin: 6px 0 14px;
      }

      /* 列表与序号：使用 grid 布局，保证序号列和内容列对齐
         —— 额外增加 .pt-list 的 padding-left 控制整体缩进（使序号也右移） */
      .pt-list {
        list-style: none;
        margin: 0;
        padding: 0;
        counter-reset: item;
        display: block;
        padding-left: var(--pt-list-indent); /* 关键：整体向右缩进，序号也会随之移动 */
      }
      .pt-list > li {
        counter-increment: item;
        display: grid;
        grid-template-columns: var(--pt-counter-size) 1fr;
        column-gap: var(--pt-gap);
        align-items: start;
        margin-bottom: 10px; /* li 之间间距，可微调 */
        padding: 4px 0;
      }

      /* 序号圆圈（放在 li::before） */
      .pt-list > li::before {
        content: counter(item) ".";
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: var(--pt-counter-size);
        height: var(--pt-counter-size);
        background: var(--title-color);
        color: #fff;
        border-radius: 50%;
        font-weight: 700;
        font-size: 16px;
        box-shadow: 0 4px 10px rgba(0, 74, 159, 0.15);
      }

      /* 让 title 与 body 都处于第二列 */
      .pt-item-title {
        grid-column: 2 / -1;
        display: block;
        font-weight: 700;
        color: var(--title-color);
        font-size: calc(var(--title-size) * 0.95);
        margin: 0 0 4px 0; /* 标题与正文的距离缩小 */
      }

      .pt-item-body {
        grid-column: 2 / -1;
        color: var(--text-color);
        font-size: 22px; /* 你之前要求的较小字号 */
        line-height: 1.4; /* 行间距较紧凑 */
        margin: 0; /* 标题与正文之间的间距由标题下 margin 控制（已设为4px） */
      }

      /* 缩小 pt-item-body 内部 <p> 的间距，首段不留上间距，末段不留下间距 */
      .pt-item-body p {
        margin: 0 0 6px; /* 下间距 6px（可改为 4px/8px 看效果）*/
        line-height: 1.45; /* 保持可读性，必要时可调小到 1.35 */
        font-size: inherit; /* 继承 .pt-item-body 的字号（保持一致） */
      }

      /* 确保最后一个段落没有多余下边距（避免在元素结尾处多余空白） */
      .pt-item-body p:last-child {
        margin-bottom: 0;
      }

      /* 可选：如果内联的 <strong> 导致视觉拥挤，可以增加一点间距 */
      .pt-item-body p strong {
        display: inline-block;
        margin-right: 6px; /* 让“问题表述：”与后文稍微分离 */
        font-weight: 700;
      }

      /* 小屏下：改为单列显示（序号仍然在左侧） */
      @media (max-width: 900px) {
        .proposal-template {
          flex-direction: column;
        }
        .pt-right {
          width: 100%;
          height: 120px;
          order: 2;
        }
        .pt-left {
          order: 1;
        }
        .pt-title {
          font-size: calc(var(--title-size) * 0.95);
        }
        /* 缩小文字和间距 */
        .pt-item-body {
          font-size: 20px;
          line-height: 1.35;
        }
        .pt-list {
          /* 移动端缩进稍微减小以适应小屏 */
          padding-left: calc(var(--pt-list-indent) - 6px);
        }
        .pt-list > li {
          grid-template-columns: 40px 1fr;
          column-gap: 10px;
          margin-bottom: 8px;
        }
        .pt-list > li::before {
          width: 40px;
          height: 40px;
          font-size: 15px;
        }
      }

      .pt-right {
        flex: 0 0 30%;
        position: relative;
        min-width: 180px;
        height: 220px;
      }
      .decor-top,
      .decor-bottom {
        position: absolute;
        background: linear-gradient(
          180deg,
          rgba(3, 60, 115, 0.06),
          rgba(3, 60, 115, 0.03)
        );
        border-radius: 8px;
        box-shadow: 0 6px 18px rgba(3, 60, 115, 0.04);
      }

      /* timeline (kept minimalist: used as image container in this template) */
      .timeline-card img {
        margin: 0;
        border-radius: 0;
      }

      /* issue slide */
      .issue-slide {
        position: relative;
        overflow: visible;
        padding: 28px 34px;
        box-sizing: border-box;
        min-height: 300px;
        background: var(--card);
      }
      .issue-inner {
        max-width: 1100px;
        margin: 0 auto;
        position: relative;
        z-index: 2;
      }
      .issue-title {
        font-family: var(--font-serif);
        color: var(--title-color);
        font-size: var(--title-size);
        margin: 6px 0 10px;
        font-weight: 900;
      }
      .issue-subtitle {
        display: flex;
        align-items: baseline;
        gap: 10px;
        font-size: calc(var(--title-size) * 0.95);
        color: var(--title-color);
        font-weight: 700;
        margin-bottom: 12px;
      }
      .issue-subtitle .label {
        font-weight: 1000;
        min-width: 100px;
        flex-shrink: 0;
      }
      .subtitle-text {
        text-decoration: underline;
        text-underline-offset: 6px;
      }
      .issue-body p {
        font-size: var(--text-size);
        line-height: 1.8;
        color: var(--text-color);
        margin: 6px 0 22px;
      }
      .issue-authors {
        font-size: var(--text-size);
        color: var(--text-color);
        font-weight: 800;
        text-align: right;
        margin-top: 20px;
        padding-right: 6px;
      }

      .issue-decor {
        position: absolute;
        z-index: 1;
        background: linear-gradient(
          180deg,
          rgba(3, 60, 115, 0.06),
          rgba(3, 60, 115, 0.02)
        );
        border-radius: 6px;
        box-shadow: 0 10px 20px rgba(3, 60, 115, 0.03);
      }
      .decor-top-left {
        width: 120px;
        height: 120px;
        top: 8px;
        left: 8px;
        transform: rotate(-18deg);
        clip-path: polygon(10% 0, 100% 0, 100% 30%, 70% 100%, 0 80%);
      }
      .decor-bottom-right {
        width: 200px;
        height: 200px;
        right: 18px;
        bottom: 18px;
        transform: rotate(12deg);
        clip-path: polygon(0 10%, 85% 0, 100% 85%, 18% 100%);
      }

      @media (max-width: 900px) {
        .issue-title {
          font-size: calc(var(--title-size) * 0.95);
        }
        .issue-subtitle {
          font-size: calc(var(--title-size) * 0.85);
          flex-wrap: wrap;
        }
        .issue-body p {
          font-size: calc(var(--text-size) * 0.95);
          line-height: 1.6;
        }
        .issue-authors {
          font-size: calc(var(--text-size) * 0.9);
          text-align: left;
        }
        .decor-top-left,
        .decor-bottom-right {
          display: none;
        }
      }

      /* process container: 3:1 layout for timeline and team */
      .process-container {
        display: flex;
        gap: 24px;
        width: 100%;
        box-sizing: border-box;
      }
      .timeline-card {
        flex: 3;
        min-width: 0;
      }
      .team-card {
        flex: 1;
        min-width: 0;
        background: linear-gradient(135deg, #f8faff 0%, #e9f2ff 100%);
        border-left: 4px solid #1a6bb3;
        padding: 20px;
        display: flex;
        flex-direction: column;
        height: fit-content;
        max-height: 600px;
        overflow-y: auto;
      }
      .team-header {
        text-align: center;
        margin-bottom: 24px;
        padding-bottom: 16px;
        border-bottom: 2px solid rgba(26, 107, 179, 0.2);
      }
      .team-title {
        font-family: var(--font-serif);
        font-size: calc(var(--title-size) * 0.9);
        font-weight: 800;
        color: var(--title-color);
        margin: 0 0 8px 0;
      }
      .team-subtitle {
        font-size: calc(var(--text-size) * 0.75);
        color: var(--text-color);
        font-weight: 600;
        margin: 0;
      }
      .members-list {
        list-style: none;
        padding: 0;
        margin: 0;
      }
      .member-item {
        padding: 16px 12px;
        border-bottom: 1px solid rgba(26, 107, 179, 0.1);
        font-size: calc(var(--text-size) * 0.85);
        display: flex;
        align-items: center;
        transition: all 0.2s ease;
        border-radius: 6px;
        margin-bottom: 8px;
        background: rgba(255, 255, 255, 0.8);
      }
      .member-item:hover {
        background: #e6f0ff;
        transform: translateX(3px);
      }
      .member-number {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 28px;
        height: 28px;
        background: linear-gradient(135deg, #1a6bb3 0%, #0d4a8a 100%);
        color: white;
        border-radius: 50%;
        font-weight: 700;
        margin-right: 16px;
        font-size: calc(var(--text-size) * 0.7);
        flex-shrink: 0;
      }
      .member-name {
        font-size: calc(var(--text-size) * 0.85);
        color: var(--text-color);
        font-weight: 600;
      }
      .team-footer {
        margin-top: auto;
        padding-top: 16px;
        text-align: center;
        font-size: calc(var(--text-size) * 0.7);
        color: #666;
        border-top: 1px solid rgba(26, 107, 179, 0.1);
      }

      @media (max-width: 768px) {
        .process-container {
          flex-direction: column;
        }
        .timeline-card,
        .team-card {
          flex: none;
          width: 100%;
        }
        .team-card {
          order: 2;
          margin-top: 24px;
        }
        .timeline-card {
          order: 1;
        }
      }

      /* published list */
      .published-list {
        list-style: none;
        padding: 12px 4px;
        margin: 0;
        counter-reset: published-counter;
      }
      .published-list li {
        position: relative;
        padding: 14px 12px 14px 60px;
        border-bottom: 1px solid var(--border);
        font-size: 30px;
        min-height: 60px;
        display: flex;
        align-items: center;
      }
      .published-list li::before {
        counter-increment: published-counter;
        content: counter(published-counter);
        position: absolute;
        left: 12px;
        top: 50%;
        transform: translateY(-50%);
        width: 44px;
        height: 44px;
        background-color: var(--title-color);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: 22px;
        box-shadow: 0 4px 8px rgba(0, 74, 159, 0.2);
        z-index: 1;
      }
      .published-list li::after {
        content: "";
        position: absolute;
        left: 8px;
        top: 50%;
        transform: translateY(-50%);
        width: 52px;
        height: 52px;
        background: rgba(0, 74, 159, 0.1);
        border-radius: 50%;
        z-index: 0;
      }
      .published-list li a {
        color: var(--text-color);
        text-decoration: none;
        font-weight: 700;
        display: block;
        width: 100%;
        transition: all 0.2s ease;
        padding: 4px 0;
      }
      .published-list li a:hover {
        text-decoration: underline;
        color: var(--title-color);
        transform: translateX(4px);
      }

      .published-hero {
        margin-bottom: 18px;
        padding: 20px;
        border-radius: 8px;
        background: linear-gradient(
          90deg,
          rgba(3, 60, 115, 0.06),
          rgba(3, 60, 115, 0.02)
        );
        border: 1px solid rgba(3, 60, 115, 0.06);
        font-family: var(--font-serif);
        color: var(--title-color);
        font-size: 30px;
        font-weight: 800;
        line-height: 1.4;
        text-align: center;
      }

      /* back button & breadcrumb for issue pages */
      .issue-topbar {
        display: flex;
        gap: 12px;
        align-items: center;
        margin-bottom: 12px;
      }
      .back-btn {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        border-radius: 8px;
        border: 1px solid rgba(0, 0, 0, 0.06);
        background: #ffffff;
        cursor: pointer;
        font-weight: 700;
        font-size: 14px;
        color: var(--title-color);
        box-shadow: 0 6px 14px rgba(3, 60, 115, 0.04);
      }
      .back-btn:hover {
        transform: translateY(-1px);
      }
      .back-icon {
        width: 14px;
        height: 14px;
        display: inline-block;
        border-left: 2px solid currentColor;
        border-bottom: 2px solid currentColor;
        transform: rotate(45deg);
        margin-right: 2px;
      }
      .breadcrumb {
        font-size: 15px;
        color: var(--text-color);
        opacity: 0.95;
      }
      .breadcrumb a {
        color: var(--text-color);
        text-decoration: none;
        font-weight: 600;
      }
      .breadcrumb a:hover {
        color: var(--title-color);
        text-decoration: underline;
      }
      .breadcrumb .sep {
        color: rgba(0, 0, 0, 0.12);
        margin: 0 8px;
      }
    </style>
  </head>

  <body>
    <header class="top-header">
      <div class="header">“软件工程重要研究问题”征集与发布</div>
    </header>

    <div class="page">
      <div class="shell">
        <aside class="sidebar" aria-label="页面目录">
          <div class="nav-title">目录</div>
          <ul class="nav-list">
            <li>
              <button class="nav-btn" data-key="motivation">背景与动机</button>
            </li>
            <li>
              <button class="nav-btn" data-key="process">组织与流程</button>
            </li>
            <li>
              <button class="nav-btn" data-key="template">
                模板与联系方式
              </button>
            </li>
            <li>
              <button
                class="nav-btn"
                data-key="published"
                id="publishedBtn"
                aria-expanded="false"
                aria-controls="publishedSublist"
              >
                已发布重要问题
              </button>
              <ul
                id="publishedSublist"
                class="sub-list"
                role="menu"
                aria-label="已发布重要问题列表（侧边）"
              >
                <li
                  style="color: var(--muted); padding: 6px 8px; font-size: 16px"
                >
                  正在加载……
                </li>
              </ul>
            </li>
          </ul>
        </aside>

        <main id="mainContent" aria-live="polite">
          <section id="defaultView" class="card" aria-labelledby="navDefault">
            <h3 id="navDefault" class="sr-only">默认视图</h3>
            <img
              src="./src/defaultView.png"
              class="auto-img"
              alt="defaultView"
            />
          </section>

          <section
            id="motivation"
            class="card"
            style="display: none"
            aria-labelledby="navMotivation"
          >
            <h3 id="navMotivation" class="sr-only">背景与动机</h3>
            <div
              style="
                padding: 20px 10px;
                color: var(--text-color);
                font-family: var(--font-sans);
              "
            >
              <div
                style="
                  display: flex;
                  flex-direction: column;
                  gap: 12px;
                  margin-bottom: 14px;
                "
              >
                <div style="font-size: 20px">
                  当前，人类正在进入一个人机物三元融合的万物智能互联时代，软件工程也面临着一场变革。一方面，人机物三元融合打开了新的需求空间，“软件定义一切”日益成为一种现实，这大大拓展了软件工程的学科疆域。另一方面，新一轮人工智能技术的突破赋予了软件新的内在能力，使得软件系统可以处理涉及高维对象、非确定、以及逻辑规则难以描述的任务，也给软件工程自身的自动化和智能化带来了新的契机。软件工程的研究与实践长期致力于高效率、低代价地构造和运行高质量的各种规模的及各种复杂性的软件系统。上述两方面的发展趋势激发我们重新思考软件工程的内涵和外延，更好地应对和把握其所带来的挑战与机遇。
                </div>
                <div style="font-size: 20px">
                  因应这一变革，中国计算机学会软件工程专委会（以下简称“专委会”）决定启动“软件工程重要研究问题”的征集与遴选活动。本次活动旨在通过汇聚学术界和产业界等多方力量，提出若干在软件工程领域意义重大、需求迫切、且期望在未来五到十年内取得重大进展与突破的研究课题；并以此进一步凝聚软件工程领域学科共识，加强学术界与产业界的协同联动，引导广大软件工程研究人员攻坚关键科学技术问题，推动本领域的科学创新与技术进步。
                </div>
                <div style="font-size: 20px">
                  专委会向专委全体成员及社会软件工程相关领域专家公开征集“软件工程重要研究问题”提案。问题征集结束后，专委会组织专委常委进行遴选、编辑，并向社会公开发布入选的“软件工程重要研究问题”。
                </div>
              </div>
            </div>
            <img
              src="./src/background.png"
              class="auto-img"
              alt="background"
              style="max-width: 90%; margin: 0 auto"
            />
          </section>

          <section
            id="process"
            class="card"
            style="display: none; padding: 0"
            aria-labelledby="navProcess"
          >
            <h3 id="navProcess" class="sr-only">组织与流程</h3>
            <div class="process-container">
              <div class="team-card">
                <div class="team-header">
                  <h2 class="team-title">首届工作组</h2>
                  <p class="team-subtitle">工作组成员名单</p>
                </div>
                <ul class="members-list">
                  <li class="member-item">
                    <span class="member-number">1</span
                    ><span class="member-name">李宣东</span>
                  </li>
                  <li class="member-item">
                    <span class="member-number">2</span
                    ><span class="member-name">张东梅</span>
                  </li>
                  <li class="member-item">
                    <span class="member-number">3</span
                    ><span class="member-name">李戈</span>
                  </li>
                  <li class="member-item">
                    <span class="member-number">4</span
                    ><span class="member-name">夏鑫</span>
                  </li>
                  <li class="member-item">
                    <span class="member-number">5</span
                    ><span class="member-name">刘辉</span>
                  </li>
                  <li class="member-item">
                    <span class="member-number">6</span
                    ><span class="member-name">马晓星</span>
                  </li>
                </ul>
              </div>

              <div class="timeline-card">
                <img src="./src/timeline.png" class="auto-img" alt="timeline" />
              </div>
            </div>
          </section>

          <section
            id="template"
            class="card"
            style="display: none"
            aria-labelledby="navTemplate"
          >
            <h3 id="navTemplate" class="sr-only">模板与联系方式</h3>
            <div class="proposal-template">
              <div class="pt-left">
                <h1 class="pt-title">软件工程重要问题提议模版</h1>
                <ol class="pt-list">
                  <li>
                    <div class="pt-item-title">问题描述</div>
                    <div class="pt-item-body">
                      <p>
                        <strong>问题表述：</strong
                        >一句话表述问题。尽量不超过30个字。
                      </p>
                      <p>
                        <strong>解释说明：</strong
                        >对问题的进一步解释和界定。尽量不超过150字。
                      </p>
                      <p>
                        <strong>研究现状：</strong
                        >可选，对该问题研究现状的定性或定量说明。尽量不超过100字。
                      </p>
                      <p>
                        <strong>研究目标：</strong
                        >说明判定该问题研究取得成功或重要进展的标准。尽量不超过150字。
                      </p>
                    </div>
                  </li>

                  <li>
                    <div class="pt-item-title">重要意义</div>
                    <div class="pt-item-body">
                      对问题重要意义的说明，可分点论述。意义包括学术意义、国家需求、应用价值等一个或多个方面。尽量不超过300字。
                    </div>
                  </li>

                  <li>
                    <div class="pt-item-title">示例或相关工作</div>
                    <div class="pt-item-body">
                      给出这个问题上的有代表意义的研究示例或相关工作。可分类说明。尽量不超过300字。
                    </div>
                  </li>

                  <li>
                    <div class="pt-item-title">参考文献</div>
                    <div class="pt-item-body">不超过10篇。</div>
                  </li>

                  <li>
                    <div class="pt-item-title">【提议人】</div>
                    <div class="pt-item-body">张三、李四</div>
                  </li>
                </ol>

                <div style="margin-top: 22px">
                  <h1 class="pt-title" style="color: crimson">联系人</h1>
                  <div class="pt-item-body" style="margin-top: 8px">
                    新提案请通过电子邮件发送给 CCF 软件工程专委秘书处：
                    <a href="mailto:Liuhui08@bit.edu.cn">Liuhui08@bit.edu.cn</a>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <section
            id="published"
            class="card"
            style="display: none"
            aria-labelledby="navPublished"
          >
            <div class="published-hero" role="img" aria-label="发布说明">
              CCF 软件工程委员会在 2025 CCF
              中国软件大会闭幕式上正式发布了三个软件工程重要研究问题
            </div>

            <ul id="publishedList" class="published-list" aria-live="polite">
              <li style="color: var(--muted)">正在加载已发布问题……</li>
            </ul>
          </section>
        </main>
      </div>
    </div>

    <footer class="footer">© 2025 中国计算机学会 软件工程专业委员会</footer>

    <script>
      const staticSections = [
        "defaultView",
        "motivation",
        "process",
        "template",
        "published",
      ];
      const dynamicSections = [];
      window.issuesData = null;
      window.issuesLoaded = false;

      function showSection(id) {
        if (!id) id = "defaultView";
        const needsLoad =
          !window.issuesLoaded &&
          (id === "published" ||
            id.startsWith("issue-") ||
            id.startsWith("issue"));
        if (needsLoad) {
          loadIssues()
            .then(() => {
              const realId = resolveIssueId(id);
              if (
                realId === "published" ||
                (realId && realId.startsWith("issue-"))
              )
                setPublishedExpanded(true);
              performShow(realId);
            })
            .catch((err) => {
              console.error("加载 issues.json 失败：", err);
              performShow(id);
            });
        } else {
          const realId = resolveIssueId(id);
          if (realId === "published" || (realId && realId.startsWith("issue-")))
            setPublishedExpanded(true);
          performShow(realId);
        }
      }

      function performShow(id) {
        const main = document.getElementById("mainContent");
        const sections = main.querySelectorAll("section");
        sections.forEach((s) => {
          try {
            s.style.display = s.id === id ? "" : "none";
          } catch (e) {}
        });
        if (!document.getElementById(id)) {
          id = "defaultView";
          const dv = document.getElementById(id);
          if (dv) dv.style.display = "";
        }
        document.querySelectorAll(".nav-btn[data-key]").forEach((b) => {
          b.classList.toggle(
            "active",
            b.dataset.key === id ||
              (id && id.startsWith("issue-") && b.dataset.key === "published")
          );
        });
        if (location.hash.slice(1) !== id)
          history.replaceState(null, "", "#" + id);
        try {
          window.scrollTo && window.scrollTo({ top: 0, behavior: "smooth" });
        } catch (e) {}
      }

      function resolveIssueId(requestedId) {
        if (!requestedId) return "defaultView";
        if (document.getElementById(requestedId)) return requestedId;
        if (window.issuesData && Array.isArray(window.issuesData)) {
          const found = window.issuesData.find((it) => {
            if (!it) return false;
            const cand =
              it._internalId ||
              (it.id
                ? "issue-" +
                  String(it.id)
                    .toLowerCase()
                    .replace(/[^\w\-]/g, "-")
                : null);
            return (
              cand === requestedId ||
              it.id === requestedId ||
              (it.id && "issue-" + it.id === requestedId)
            );
          });
          if (found) return found._internalId;
          const idxMatch = requestedId.match(/(\d+)$/);
          if (idxMatch) {
            const idx = Number(idxMatch[1]);
            if (window.issuesData[idx])
              return window.issuesData[idx]._internalId;
          }
        }
        if (requestedId === "published") return "published";
        return "defaultView";
      }

      function loadIssues() {
        if (window.issuesLoaded) return Promise.resolve(window.issuesData);
        return fetch("./issues.json", { cache: "no-cache" })
          .then((r) => {
            if (!r.ok) throw new Error("HTTP " + r.status);
            return r.json();
          })
          .then((data) => {
            if (!Array.isArray(data))
              throw new Error("issues.json 必须为数组格式");
            window.issuesData = data;
            renderPublishedList(data);
            renderPublishedSidebar(data);
            renderIssuePages(data);
            window.issuesLoaded = true;
            return data;
          });
      }

      function safeIdForIssue(orig, idx) {
        if (orig && typeof orig === "string") {
          const clean = orig
            .trim()
            .toLowerCase()
            .replace(/[^\w\-]/g, "-");
          if (clean.length > 0) return "issue-" + clean;
        }
        return "issue-" + idx;
      }

      function renderPublishedList(list) {
        const publishedListEl = document.getElementById("publishedList");
        publishedListEl.innerHTML = "";
        if (!list || !list.length) {
          const li = document.createElement("li");
          li.textContent = "暂时没有已发布的问题。";
          publishedListEl.appendChild(li);
          return;
        }
        list.forEach((issue, idx) => {
          const id = safeIdForIssue(
            issue.id || issue.title || "issue-" + idx,
            idx
          );
          issue._internalId = id;
          dynamicSections.push(id);
          const li = document.createElement("li");
          const a = document.createElement("a");
          a.href = "#" + id;
          a.textContent = issue.title || "问题 " + (idx + 1);
          a.setAttribute("data-issue-id", id);
          a.addEventListener("click", (ev) => {
            ev.preventDefault();
            showSection(id);
          });
          li.appendChild(a);
          publishedListEl.appendChild(li);
        });
      }

      function renderPublishedSidebar(list) {
        const sublist = document.getElementById("publishedSublist");
        if (!sublist) return;
        sublist.innerHTML = "";
        if (!list || !list.length) {
          const li = document.createElement("li");
          li.style.color = "var(--muted)";
          li.style.padding = "6px 8px";
          li.textContent = "暂无已发布项";
          sublist.appendChild(li);
          return;
        }
        list.forEach((issue, idx) => {
          const id =
            issue._internalId ||
            safeIdForIssue(issue.id || issue.title || "issue-" + idx, idx);
          issue._internalId = id;
          const li = document.createElement("li");
          const btn = document.createElement("button");
          btn.className = "nav-sub";
          btn.setAttribute("data-issue-id", id);
          btn.setAttribute("role", "menuitem");
          btn.textContent = issue.title || "问题 " + (idx + 1);
          btn.addEventListener("click", (ev) => {
            ev.preventDefault();
            showSection(id);
          });
          li.appendChild(btn);
          sublist.appendChild(li);
        });
      }

      function createTopbarForIssue(sectionEl, issue) {
        if (sectionEl.querySelector(".issue-topbar")) return;
        const topbar = document.createElement("div");
        topbar.className = "issue-topbar";
        const backBtn = document.createElement("button");
        backBtn.className = "back-btn";
        backBtn.setAttribute("aria-label", "返回已发布重要问题列表");
        backBtn.innerHTML =
          '<span class="back-icon" aria-hidden="true"></span><span>返回</span>';
        backBtn.addEventListener("click", (ev) => {
          ev.preventDefault();
          showSection("published");
        });
        topbar.appendChild(backBtn);
        const inner = sectionEl.querySelector(".issue-inner");
        if (inner) inner.insertBefore(topbar, inner.firstChild);
        else sectionEl.insertBefore(topbar, sectionEl.firstChild);
      }

      function renderIssuePages(list) {
        if (!Array.isArray(list) || !list.length) return;
        const main = document.getElementById("mainContent");
        list.forEach((issue, idx) => {
          const id =
            issue._internalId ||
            safeIdForIssue(issue.id || issue.title || "issue-" + idx, idx);
          if (document.getElementById(id)) return;
          const section = document.createElement("section");
          section.id = id;
          section.className = "card issue-slide";
          section.style.display = "none";
          section.setAttribute("aria-labelledby", id + "-label");
          const title = issue.title || "未命名问题";
          const label = issue.label || "问题表述：";
          const subtitle = issue.subtitle || issue.tagline || "";
          const body = issue.body || issue.description || "";
          const authors = Array.isArray(issue.authors)
            ? issue.authors
            : issue.authors
            ? [issue.authors]
            : [];
          const authorsDisplay = authors.length ? authors.join("，") : "";
          section.innerHTML = `
            <h3 id="${id}-label" class="sr-only">${title}</h3>
            <div class="issue-decor decor-top-left" aria-hidden="true"></div>
            <div class="issue-inner">
              <header class="issue-header">
                <h1 class="issue-title">${escapeHtml(title)}</h1>
                <div class="issue-subtitle">
                  <span class="label">${escapeHtml(label)}</span>
                  <span class="subtitle-text">${escapeHtml(subtitle)}</span>
                </div>
              </header>
              <article class="issue-body">
                ${
                  typeof body === "string" ? `<p>${escapeHtml(body)}</p>` : body
                }
              </article>
              <div class="issue-authors">${escapeHtml(authorsDisplay)}</div>
            </div>
            <div class="issue-decor decor-bottom-right" aria-hidden="true"></div>
          `;
          const publishedEl = document.getElementById("published");
          if (publishedEl && publishedEl.parentNode)
            publishedEl.parentNode.insertBefore(
              section,
              publishedEl.nextSibling
            );
          else main.appendChild(section);
          createTopbarForIssue(section, issue);
        });
      }

      function escapeHtml(str) {
        if (typeof str !== "string") return str;
        return str
          .replace(/&/g, "&amp;")
          .replace(/</g, "&lt;")
          .replace(/>/g, "&gt;")
          .replace(/"/g, "&quot;")
          .replace(/'/g, "&#39;");
      }

      function setPublishedExpanded(expanded) {
        const publishedBtn = document.getElementById("publishedBtn");
        const sublist = document.getElementById("publishedSublist");
        if (!publishedBtn || !sublist) return;
        if (expanded) {
          sublist.classList.add("show");
          publishedBtn.setAttribute("aria-expanded", "true");
        } else {
          sublist.classList.remove("show");
          publishedBtn.setAttribute("aria-expanded", "false");
        }
      }

      (function init() {
        document.querySelectorAll(".nav-btn[data-key]").forEach((btn) => {
          btn.addEventListener("click", () => {
            const key = btn.dataset.key;
            if (key === "published") {
              const sublist = document.getElementById("publishedSublist");
              const isShown = sublist && sublist.classList.contains("show");
              setPublishedExpanded(!isShown);
              showSection("published");
            } else {
              showSection(key);
            }
          });
        });

        showSection("defaultView");

        loadIssues().catch((err) => {
          console.warn("预加载 issues.json 失败：", err);
          const publishedListEl = document.getElementById("publishedList");
          if (publishedListEl && publishedListEl.children.length === 0) {
            const li = document.createElement("li");
            li.style.color = "var(--muted)";
            li.textContent =
              "无法加载已发布问题（请确保 issues.json 与本页面位于同一目录且为数组格式）。";
            publishedListEl.appendChild(li);
          }
          const sublist = document.getElementById("publishedSublist");
          if (sublist) {
            sublist.innerHTML = "";
            const li = document.createElement("li");
            li.style.color = "var(--muted)";
            li.style.padding = "6px 8px";
            li.textContent = "无法加载侧边已发布项";
            sublist.appendChild(li);
          }
        });

        if (location.hash) {
          const h = location.hash.slice(1);
          if (h) showSection(h);
        }

        const observer = new MutationObserver(() => {
          const allSections = document.querySelectorAll("main > section");
          for (const s of allSections) {
            if (getComputedStyle(s).display !== "none") {
              if (location.hash.slice(1) !== s.id)
                history.replaceState(null, "", "#" + s.id);
              break;
            }
          }
        });
        observer.observe(document.getElementById("mainContent"), {
          childList: true,
          subtree: true,
          attributes: true,
          attributeFilter: ["style"],
        });

        window.addEventListener("hashchange", () => {
          const h = location.hash.slice(1);
          if (h) showSection(h);
        });

        window.addEventListener("keydown", function (e) {
          if (e.key === "Escape" || e.key === "Esc") {
            const visible = Array.from(
              document.querySelectorAll("main > section")
            ).find((s) => getComputedStyle(s).display !== "none");
            if (visible && visible.id && visible.id.startsWith("issue-"))
              showSection("published");
          }
        });
      })();
    </script>
  </body>
</html>
